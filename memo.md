# 謎解きクイズ作成メモ

## 全体構想

### ストーリーライン
- 主人公: アレックス・チェン（セキュリティエンジニア）
- 所属: Project Aegis
- 状況: 敵組織のシステムの脆弱性を発見後、狙われている
- 目的: 真実を見つけてProject Aegisを守る
- 最初のヒント: 最後にpushしたコミットメッセージ

### 謎解きの設計思考

#### レベル設計
1. **初級**: Base64やシーザー暗号など、基本的なエンコーディング
2. **中級**: 複数の暗号の組み合わせ、プログラミング知識が必要
3. **上級**: セキュリティの専門知識、複雑な暗号解読

#### ターゲット層
- エンジニア（特にセキュリティに興味がある人）
- CTF経験者
- プログラミング経験がある謎解き愛好家

## アイデアメモ

### コミットメッセージの活用
- gitのコミットメッセージに暗号を隠す
- コミットハッシュ自体が次のヒントになる

### 技術的な仕掛け
1. **DNS TXTレコード**: ドメインのTXTレコードにメッセージを隠す
2. **HTTPヘッダー**: カスタムヘッダーに情報を埋め込む
3. **画像のEXIFデータ**: 写真のメタデータに座標や暗号を隠す
4. **QRコードの多層化**: QRコード内にさらに別のQRコードを埋め込む
5. **音声スペクトログラム**: 音声ファイルのスペクトログラムで文字や画像を表現

### プログラミング要素
この部分は保留

### セキュリティ概念の活用
- SQLインジェクションの原理を使った謎解き
- XSSの仕組みを理解していないと解けない問題
- JWTトークンの構造を利用した暗号
- ハッシュの衝突を利用した仕掛け

### ストーリーとの連携
- Project Aegisの内部システムへのアクセス
- 敵組織との駆け引き
- タイムリミットの演出（リアルタイムイベント）
- 複数のエンディング（選択によって変わる）

## 実装上の注意点

### 難易度バランス
- 最初は簡単な問題で達成感を与える
- 徐々に難易度を上げていく
- 行き詰まった時のヒントシステム

### 技術的配慮
- GitHub Actionsを利用して自動検証
- GitHubリポジトリにPull Requestを通じて回答を提出

### 没入感の演出
- リアルなエラーメッセージ
- 実際のツール（git, curl, openssl等）を使用
- 時系列に沿ったストーリー展開

## 今後の検討事項

### 問題の流れ
1. コミットメッセージから最初の暗号を発見
2. 複数の暗号を解いてURLやIPアドレスを特定
3. 特定のサーバーにアクセスして次のヒントを取得
4. セキュリティの知識を使って侵入を模擬
5. 最終的に真実にたどり着く

### 追加アイデア
- ARを使った現実世界との連携
- SNSアカウントを使った情報発信
- 期間限定のイベント
- 協力プレイ要素

## 参考資料
- CTFの問題集
- セキュリティコンテストの過去問
- 暗号化アルゴリズムの実装例
- エスケープルームの設計手法

## 作成進捗メモ（2025年7月8日）

### 完成したファイル
1. **cryptography.md**: 暗号の種類を網羅的に記載。古典暗号からCTF系まで幅広くカバー
2. **tool.md**: ネットワーク、ファイル、Web、地理的要素など多様なリソースを整理
3. **background.md**: アレックス・チェン、Project Aegis、Shadow Collectiveの詳細な設定を構築
4. **security.md**: 実践的なセキュリティ概念を謎解きに活用する方法を体系化
5. **memo.md**: 全体構想とアイデアを記録（このファイル）

### ストーリーと技術の統合案
- アレックスが発見した脆弱性は、Project AegisとShadow Collectiveの両方に影響
- 最初の問題は簡単なBase64デコードから始め、徐々に高度な技術へ
- コミットメッセージ → 暗号解読 → セキュリティ脆弱性の利用 → 真実の発見

### 問題設計の方向性
1. **第1層**: 基本的な暗号（ROT13、Base64）でコミットメッセージを解読
2. **第2層**: GitHubリポジトリやWebサーバーへのアクセス
3. **第3層**: SQLインジェクションやXSSを使った情報取得
4. **第4層**: より高度な暗号とセキュリティ概念の組み合わせ
5. **最終層**: すべての手がかりを統合して真実を明らかに

### 技術的実装のポイント
- Dockerコンテナで隔離された環境を提供
- 実際のgitリポジトリを使用
- 簡易的なWebアプリケーションで脆弱性を実装
- 時限要素を含むリアルタイム性

### エンディングの構想
- マルチエンディング：プレイヤーの選択により結末が変化
- A: Project Aegisを守り、Shadow Collectiveを撃退
- B: 両組織の裏にある真実を暴露
- C: 第三の勢力の存在を発見

## ストーリー展開（story.md更新内容）

### Question01-05の構成
1. **Question01**: アレックスからの最初のメッセージ、GitHubリポジトリへの誘導
2. **Question02**: システムログによる緊迫感の演出、31337ポートの言及
3. **Question03**: 内部協力者からのヒント、GitHub Actions/PR提出方法の説明
4. **Question04**: Shadow Collectiveの脅威、ステガノグラフィーの示唆
5. **Question05**: 最終警告、詩的なメッセージで分散型の考え方を示唆

### 技術要素の組み込み
- GitHubリポジトリ（alexchen-security/project-aegis-logs）を実際に作成
- コミットメッセージ、ハッシュ、ブランチ名に暗号を分散
- GitHub Actionsで自動検証システムを構築
- Pull Requestで回答を提出（AEGIS-で始まる識別子）

### ゲームメカニクス
- 間違った回答3回で24時間のペナルティ（緊張感の演出）
- 時間経過とともにストーリーが進行
- Shadow Collectiveとの競争要素